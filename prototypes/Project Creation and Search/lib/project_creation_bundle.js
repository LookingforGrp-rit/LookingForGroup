(()=>{"use strict";var e,t,o,n,r={15:(e,t,o)=>{o.a(e,(async(e,n)=>{try{o.d(t,{M:()=>d,b:()=>u});var r=o(958),l=o(972),i=e([r,l]);[r,l]=i.then?(await i)():i;const a={apiKey:"AIzaSyBimRr67hSVEwVyo4QhDnPNyGNfG_KDwIo",authDomain:"lfg-test-7da4d.firebaseapp.com",projectId:"lfg-test-7da4d",storageBucket:"lfg-test-7da4d.appspot.com",messagingSenderId:"362431495411",appId:"1:362431495411:web:964887f9b6f667c6f0cb86"},s=(0,r.initializeApp)(a),c=async(e=!1)=>{let t=Math.floor(3e4*Math.random());const o=await u();if(e)for(let e in o.users)if(e==t)t=await c(!0);else for(let e in o.projects)e==t&&(t=await c());return t},u=async()=>{const e=(0,l.getDatabase)(s);return await(0,l.get)((0,l.child)((0,l.ref)(e),"lfg-test")).then((e=>!!e.exists()&&e.val()))},d=async(e,t,o=-1)=>{const n=(0,l.getDatabase)(s),r=o<0?await c("users"==t):o;let i=(0,l.ref)(n,`lfg-test/${t}/${r}`);(0,l.set)(i,e),"projects"==t&&(i=(0,l.ref)(n,`lfg-test/users/${e.owner}/projects/${r}`),(0,l.set)(i,{status:"owner"}))};n()}catch(e){n(e)}}))},70:(e,t,o)=>{o.a(e,(async(e,t)=>{try{var n=o(15),r=e([n]);n=(r.then?(await r)():r)[0];const l=async e=>{const t=await n.b();if(t)for(let o in t.users){let n=document.createElement("option");n.value=o,n.innerHTML=t.users[o].username,e.appendChild(n)}else console.log("ERROR: No database exists")},i=document.querySelector("#title"),a=document.querySelector("#size"),s=document.querySelector("#description"),c=(document.querySelector("#image"),document.querySelector("#id")),u=document.querySelector("#preferences"),d=document.querySelector("#keyword-submit"),p=document.querySelector("#keyword"),m=document.querySelector("#keyword-container"),f=document.querySelector("#add-role"),v=document.querySelector("#roles"),y=document.querySelector("#link-input"),g=document.querySelector("#link-submit"),b=document.querySelector("#link-container"),w=document.querySelector("#submit");let h=[],k=[],S=0,q=-1,x=-1;const j=async(e="-1",t,o)=>{let r=encodeURI(t.title),l=encodeURI(t.description);n.M({title:r,description:l,tags:t.keywords,isHiring:o,needs:t.roles,owner:e},"projects",x)},M=()=>{console.log("initializing"),d.onclick=E,f.onclick=L,g.onclick=P;let e=window.location.search;if(""==e){for(let e=0;e<3;e++)L();w.onclick=I,l(c),c.onchange=()=>{q=c.value}}else{let t=new URLSearchParams(e);$(t)}},$=async e=>{x=e.get("projectid");const t=await n.b();if(null==t.projects[x]){console.log("project not found, loading as creation page");for(let e=0;e<3;e++)L();return void(w.onclick=I)}document.querySelector("h1").innerHTML="Edit Project";let o=t.projects[x];console.log(o),document.querySelector("#id-box").innerHTML=`Project ID: ${x}`,q=t.projects[x].owner,i.value=N(o.title),s.value=N(o.description);for(let e of o.tags)_(e);for(let e of o.needs)C(e.roleType,e.roleNum);w.innerHTML="Save Changes",w.onclick=D},E=()=>{if(""==p.value)return void console.log("keyword input is empty, no keyword created");let e=p.value.toLowerCase();-1==h.indexOf(e)?(_(e),p.value=""):console.log("keyword already exists")},_=e=>{let t=document.createElement("div");t.setAttribute("class","keyword"),t.innerHTML=`${O(e).replace("<","&lt;").replace(">","&gt;")}`,t.value=e;let o=t.appendChild(document.createElement("button"));o.innerHTML="x",o.onclick=function(){T(t)},h.push(e),m.appendChild(t),console.log("keyword created")},T=e=>{console.log("removing keyword");let t=h.indexOf(e.value);h.splice(t,1),e.remove()},L=()=>{S++;let e=document.createElement("div");e.setAttribute("class","role"),e.innerHTML=`\n    <label for="role${S}">Role:</label>\n    <select id="role${S}" name="role${S}">\n      <option value="general">General</option>\n      <option value="programmer">Programmer</option>\n      <option value="artist">Artist</option>\n      <option value="designer">Designer</option>\n      <option value="tester">Tester</option>\n      <option value="manager">Manager</option>\n    </select>\n    <label for="num${S}">Positions:</label>\n    <input type="number" id="num${S}" name="num${S}" min="1" value="3">\n  `;let t=e.appendChild(document.createElement("button"));t.innerHTML="-",t.onclick=function(){H(e)},v.appendChild(e),console.log("new role created")},C=(e,t)=>{S++;let o=document.createElement("div");o.setAttribute("class","role"),o.innerHTML=`\n    <label for="role${S}">Role:</label>\n    <select id="role${S}" name="role${S}">\n      <option value="general">General</option>\n      <option value="programmer">Programmer</option>\n      <option value="artist">Artist</option>\n      <option value="designer">Designer</option>\n      <option value="tester">Tester</option>\n      <option value="manager">Manager</option>\n    </select>\n    <label for="num${S}">Positions:</label>\n    <input type="number" id="num${S}" name="num${S}" min="1" value="${t}">\n  `;let n=o.querySelectorAll("option");for(let t of n)if(t.value==e){t.setAttribute("selected","selected");break}let r=o.appendChild(document.createElement("button"));r.innerHTML="-",r.onclick=function(){H(o)},v.appendChild(o),console.log("new role created")},P=()=>{let e=y.value;try{new URL(e)}catch(e){return void console.log("invalid link")}let t=document.createElement("div");t.setAttribute("class","rel-link"),t.value=e;let o=document.createElement("a");o.setAttribute("href",e),o.setAttribute("target","_blank"),o.innerHTML=e,t.appendChild(o);let n=t.appendChild(document.createElement("button"));n.innerHTML="x",n.onclick=function(){A(t)},b.appendChild(t),k.push(e),y.value=""},A=e=>{console.log("removing link");let t=k.indexOf(e.value);k.splice(t,1),e.remove()},H=e=>{console.log("removing element"),e.remove()},R=()=>{let e=i.value,t=a.value,o=s.value;if(u.value,""==e||""==o||0==h.length)return void console.log("Not all fields filled, requires username, title, description, & at least 1 keyword");if(""==q||q<0)return void console.log("Please use only positive numbers in project ID");let n=[],r=[],l=document.getElementsByClassName("role");for(let e of l){let t=e.querySelector("select").value;if(-1!=r.indexOf(t))return void console.log("Multiple listings of same role type exist, please ensure each role is unique");r.push(t);let o=e.querySelector("input").value;if(""==o||o<0)return void console.log("Please use only positive numbers in position numbers");let l={roleType:t,roleNum:o};n.push(l)}return{title:e,size:t,description:o,keywords:h,roles:n}},I=()=>{let e=R(),t=!!e.roles.length;j(q,e,t)},D=()=>{let e=R(),t=!!e.roles.length;j(q,e,t,!0)},O=e=>e.charAt(0).toUpperCase()+e.slice(1),N=e=>decodeURI(e).replace("<","&lt;").replace(">","&gt;");M(),t()}catch(e){t(e)}}))},958:e=>{e.exports=import("https://www.gstatic.com/firebasejs/10.12.1/firebase-app.js")},972:e=>{e.exports=import("https://www.gstatic.com/firebasejs/10.12.1/firebase-database.js")}},l={};function i(e){var t=l[e];if(void 0!==t)return t.exports;var o=l[e]={exports:{}};return r[e](o,o.exports,i),o.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",o="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},i.a=(r,l,i)=>{var a;i&&((a=[]).d=-1);var s,c,u,d=new Set,p=r.exports,m=new Promise(((e,t)=>{u=t,c=e}));m[t]=p,m[e]=e=>(a&&e(a),d.forEach(e),m.catch((e=>{}))),r.exports=m,l((r=>{var l;s=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var l=[];l.d=0,r.then((e=>{i[t]=e,n(l)}),(e=>{i[o]=e,n(l)}));var i={};return i[e]=e=>e(l),i}}var a={};return a[e]=e=>{},a[t]=r,a})))(r);var i=()=>s.map((e=>{if(e[o])throw e[o];return e[t]})),c=new Promise((t=>{(l=()=>t(i)).r=0;var o=e=>e!==a&&!d.has(e)&&(d.add(e),e&&!e.d&&(l.r++,e.push(l)));s.map((t=>t[e](o)))}));return l.r?c:i()}),(e=>(e?u(m[o]=e):c(p),n(a)))),a&&a.d<0&&(a.d=0)},i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(70)})();